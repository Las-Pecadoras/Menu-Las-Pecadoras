/* ═══════════════════════════════════════════════════════════════
   LAS PECADORAS — animations.css
   Experiencia mobile-first: cinematográfica, táctil, memorable.
═══════════════════════════════════════════════════════════════ */

/* ══════════════════════════════════════════════════════════════
   1. PRELOADER — Blob de brasa con explosión de salida
══════════════════════════════════════════════════════════════ */

@keyframes blobPulse {
  0%, 100% {
    border-radius: 60% 40% 70% 30% / 50% 60% 40% 50%;
    transform: scale(1);
  }
  33% {
    border-radius: 40% 60% 30% 70% / 60% 40% 60% 40%;
    transform: scale(1.08);
  }
  66% {
    border-radius: 70% 30% 50% 50% / 40% 60% 40% 60%;
    transform: scale(0.95);
  }
}

@keyframes blobSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

@keyframes blobGlow {
  0%, 100% { box-shadow: 0 0 24px 4px rgba(211,84,0,0.45), 0 0 60px 10px rgba(211,84,0,0.15); }
  50%       { box-shadow: 0 0 40px 10px rgba(211,84,0,0.7), 0 0 90px 20px rgba(211,84,0,0.25); }
}

.loader-blob {
  animation: blobPulse 1.8s ease-in-out infinite,
             blobSpin  3s linear infinite,
             blobGlow  2.2s ease-in-out infinite;
}

@keyframes blobExpand {
  0%   { transform: scale(1);  opacity: 1; }
  50%  { transform: scale(8);  opacity: 0.8; }
  100% { transform: scale(28); opacity: 0; }
}

.loader-blob.explode {
  animation: blobExpand 0.7s ease-in forwards !important;
}

@keyframes loaderTextIn {
  from { opacity: 0; transform: translateY(14px); }
  to   { opacity: 0.9; transform: translateY(0); letter-spacing: 0.15em; }
}

.loader-text {
  animation: loaderTextIn 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.35s both;
}

/* ══════════════════════════════════════════════════════════════
   2. HERO — Entrada en 3 actos
══════════════════════════════════════════════════════════════ */

@keyframes stampIn {
  0%   { opacity: 0; transform: scale(1.45) translateY(-18px) rotate(-4deg); filter: blur(5px); }
  55%  { opacity: 1; transform: scale(0.95) translateY(3px) rotate(0.8deg); filter: blur(0); }
  75%  { transform: scale(1.04) translateY(-2px) rotate(-0.4deg); }
  90%  { transform: scale(0.98) translateY(0) rotate(0.2deg); }
  100% { opacity: 1; transform: scale(1) translateY(0) rotate(0deg); }
}

@keyframes inkReveal {
  0%   { opacity: 0; transform: scaleX(0.65) skewX(-10deg); filter: blur(8px); }
  45%  { opacity: 0.9; transform: scaleX(1.03) skewX(1.5deg); filter: blur(1px); }
  70%  { transform: scaleX(0.99) skewX(0deg); filter: blur(0); }
  100% { opacity: 1; transform: scaleX(1) skewX(0deg); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes logoBreathe {
  0%, 100% { box-shadow: 0 0 0 6px rgba(211,84,0,0.2), 4px 4px 0 var(--cafe-cuero); }
  50%       { box-shadow: 0 0 0 11px rgba(211,84,0,0.1), 4px 4px 0 var(--cafe-cuero); }
}

.logo-wrap {
  animation: stampIn     0.9s cubic-bezier(0.22, 1, 0.36, 1) 0.15s both,
             logoBreathe 3.5s ease-in-out 1.4s infinite;
}

.hero-title   { animation: inkReveal 0.85s cubic-bezier(0.22, 1, 0.36, 1) 0.65s both; }
.hero-sub     { animation: slideUp   0.6s ease 1.05s both; }
.hero-divider { animation: slideUp   0.5s ease 1.25s both; }

/* ══════════════════════════════════════════════════════════════
   3. BRASAS FLOTANTES en el hero (CSS puro)
══════════════════════════════════════════════════════════════ */

@keyframes emberFloat {
  0%   { transform: translateY(0) translateX(0) scale(1); opacity: 0; }
  8%   { opacity: 0.75; }
  85%  { opacity: 0.35; }
  100% { transform: translateY(-130px) translateX(var(--drift)) scale(0.2); opacity: 0; }
}

.ember {
  position: absolute;
  bottom: 12%;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--naranja);
  pointer-events: none;
  z-index: 1;
  animation: emberFloat var(--dur) ease-in var(--delay) infinite;
}

.ember-1 { left: 12%; --drift: -9px;  --dur: 3.2s; --delay: 0.0s; width: 3px; height: 3px; }
.ember-2 { left: 25%; --drift: 13px;  --dur: 2.7s; --delay: 0.8s; background: var(--dorado); }
.ember-3 { left: 40%; --drift:-16px;  --dur: 3.9s; --delay: 1.4s; width: 3px; height: 3px; }
.ember-4 { left: 54%; --drift:  9px;  --dur: 2.4s; --delay: 0.3s; }
.ember-5 { left: 67%; --drift:-11px;  --dur: 3.5s; --delay: 1.9s; background: var(--dorado); width: 3px; height: 3px; }
.ember-6 { left: 79%; --drift: 15px;  --dur: 2.9s; --delay: 1.0s; }
.ember-7 { left: 20%; --drift:  7px;  --dur: 4.2s; --delay: 2.3s; width: 2px; height: 2px; background: var(--rojo-claro); }
.ember-8 { left: 89%; --drift:-13px;  --dur: 3.4s; --delay: 1.6s; width: 2px; height: 2px; }

/* ══════════════════════════════════════════════════════════════
   4. SCROLL REVEAL — Orquestado por tipo de elemento
══════════════════════════════════════════════════════════════ */

.reveal {
  opacity: 0;
  transform: translateY(34px);
  transition: opacity 0.7s cubic-bezier(0.22, 1, 0.36, 1),
              transform 0.7s cubic-bezier(0.22, 1, 0.36, 1);
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Cards: spring bounce — se sienten físicas */
.card.reveal {
  transform: translateY(42px) scale(0.96);
  transition: opacity  0.65s cubic-bezier(0.22, 1, 0.36, 1),
              transform 0.65s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.card.reveal.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* Section labels: expand desde el centro */
.section-label.reveal {
  transform: scaleX(0.82) translateY(10px);
  transform-origin: center;
  transition: opacity  0.5s ease,
              transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

.section-label.reveal.visible {
  opacity: 1;
  transform: scaleX(1) translateY(0);
}

/* Hijos escalonados */
.reveal-stagger > * {
  opacity: 0;
  transform: translateY(22px) scale(0.95);
  transition: opacity 0.5s ease, transform 0.5s cubic-bezier(0.34, 1.4, 0.64, 1);
}

.reveal-stagger.visible > *:nth-child(1) { transition-delay: 0.05s; opacity: 1; transform: none; }
.reveal-stagger.visible > *:nth-child(2) { transition-delay: 0.14s; opacity: 1; transform: none; }
.reveal-stagger.visible > *:nth-child(3) { transition-delay: 0.23s; opacity: 1; transform: none; }
.reveal-stagger.visible > *:nth-child(4) { transition-delay: 0.32s; opacity: 1; transform: none; }

/* ══════════════════════════════════════════════════════════════
   5. PRICE STAMP — Sello de tinta con "plop" físico
══════════════════════════════════════════════════════════════ */

@keyframes priceStamp {
  0%   { opacity: 0; transform: scale(2.1) rotate(-7deg); filter: blur(5px); color: var(--cafe-cuero); }
  42%  { opacity: 1; transform: scale(0.87) rotate(1.8deg); filter: blur(0); color: var(--rojo); }
  62%  { transform: scale(1.07) rotate(-0.6deg); }
  80%  { transform: scale(0.97) rotate(0.2deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); color: var(--rojo); }
}

@keyframes inkSplat {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0); }
  28%  { opacity: 0.18; transform: translate(-50%, -50%) scale(1.4); }
  65%  { opacity: 0.07; transform: translate(-50%, -50%) scale(1.1); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
}

.price { display: inline-block; transition: color 0.3s ease; }

.price.price-visible {
  animation: priceStamp 0.58s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.price-wrap-anim {
  position: relative;
  display: inline-block;
}

.price-wrap-anim::before {
  content: 'DOLLAR';
  content: '\25CF';
  position: absolute;
  top: 50%; left: 50%;
  font-size: 3.5em;
  color: var(--rojo);
  pointer-events: none;
  opacity: 0;
  line-height: 1;
}

.price-wrap-anim.price-visible::before {
  animation: inkSplat 0.65s ease forwards;
}

/* ══════════════════════════════════════════════════════════════
   6. CARDS — Micro-interacciones táctiles
══════════════════════════════════════════════════════════════ */

.card {
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1),
              box-shadow 0.2s ease;
  will-change: transform;
}

@media (hover: hover) {
  .card:hover {
    transform: translate(-3px, -4px) rotate(-0.3deg);
    box-shadow: 7px 8px 0 var(--cafe-cuero);
  }
  .card:hover .card-img {
    transform: scale(1.05);
    filter: saturate(1.3) contrast(1.06);
  }
}

/* Touch — se hunde como papel real */
.card:active {
  transform: translate(2px, 2px) scale(0.975) !important;
  box-shadow: 1px 1px 0 var(--cafe-cuero) !important;
  transition: transform 0.07s ease, box-shadow 0.07s ease !important;
}

.card-img {
  transition: transform 0.45s cubic-bezier(0.22, 1, 0.36, 1),
              filter 0.45s ease;
}

/* ══════════════════════════════════════════════════════════════
   7. TACO LIST — Items en cascada al entrar
══════════════════════════════════════════════════════════════ */

@keyframes tacoItemIn {
  from { opacity: 0; transform: translateX(-14px); }
  to   { opacity: 1; transform: translateX(0); }
}

.card.reveal.visible .taco-list li:nth-child(1) { animation: tacoItemIn 0.32s ease 0.12s both; }
.card.reveal.visible .taco-list li:nth-child(2) { animation: tacoItemIn 0.32s ease 0.20s both; }
.card.reveal.visible .taco-list li:nth-child(3) { animation: tacoItemIn 0.32s ease 0.28s both; }
.card.reveal.visible .taco-list li:nth-child(4) { animation: tacoItemIn 0.32s ease 0.36s both; }
.card.reveal.visible .taco-list li:nth-child(5) { animation: tacoItemIn 0.32s ease 0.44s both; }

/* ══════════════════════════════════════════════════════════════
   8. MOJITO CHIPS — Rebotan al entrar
══════════════════════════════════════════════════════════════ */

@keyframes chipBounce {
  0%   { opacity: 0; transform: scale(0.5) translateY(10px); }
  65%  { transform: scale(1.1) translateY(-3px); }
  85%  { transform: scale(0.97) translateY(0); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}

.card.reveal.visible .flavor:nth-child(1) { animation: chipBounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.08s both; }
.card.reveal.visible .flavor:nth-child(2) { animation: chipBounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.18s both; }
.card.reveal.visible .flavor:nth-child(3) { animation: chipBounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.28s both; }

/* ══════════════════════════════════════════════════════════════
   9. BEBIDAS — Filas desde la izquierda en cascada
══════════════════════════════════════════════════════════════ */

@keyframes rowSlideIn {
  from { opacity: 0; transform: translateX(-18px); }
  to   { opacity: 1; transform: translateX(0); }
}

.bebidas-grid.visible .bebida-item:nth-child(1) { animation: rowSlideIn 0.38s ease 0.04s both; }
.bebidas-grid.visible .bebida-item:nth-child(2) { animation: rowSlideIn 0.38s ease 0.11s both; }
.bebidas-grid.visible .bebida-item:nth-child(3) { animation: rowSlideIn 0.38s ease 0.18s both; }
.bebidas-grid.visible .bebida-item:nth-child(4) { animation: rowSlideIn 0.38s ease 0.25s both; }

/* ══════════════════════════════════════════════════════════════
   10. FAB WHATSAPP — Spring + ring continuo
══════════════════════════════════════════════════════════════ */

@keyframes fabEntrada {
  0%   { transform: translateY(120px) scale(0.4); opacity: 0; }
  58%  { transform: translateY(-10px) scale(1.1); opacity: 1; }
  75%  { transform: translateY(4px) scale(0.95); }
  88%  { transform: translateY(-3px) scale(1.02); }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes fabRing {
  0%   { box-shadow: 3px 3px 0 #128C7E, 0 0 0 0   rgba(37,211,102,0.55), 0 4px 20px rgba(37,211,102,0.35); }
  60%  { box-shadow: 3px 3px 0 #128C7E, 0 0 0 10px rgba(37,211,102,0),   0 4px 32px rgba(37,211,102,0.5); }
  100% { box-shadow: 3px 3px 0 #128C7E, 0 0 0 0   rgba(37,211,102,0),   0 4px 20px rgba(37,211,102,0.35); }
}

.fab-whatsapp {
  animation: fabEntrada 0.85s cubic-bezier(0.34, 1.56, 0.64, 1) 1.9s both,
             fabRing    2.8s ease-in-out 3s infinite;
}

.fab-whatsapp:active {
  transform: scale(0.92) translate(2px, 2px) !important;
  box-shadow: 1px 1px 0 #128C7E !important;
  transition: transform 0.07s ease, box-shadow 0.07s ease !important;
  animation: none !important;
}

/* ══════════════════════════════════════════════════════════════
   11. NAV — Indicador activo + flash táctil
══════════════════════════════════════════════════════════════ */

.nav-tab { transition: color 0.22s ease; }

.nav-tab::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  background: var(--naranja);
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.nav-tab.active::after { transform: scaleX(1); }

@keyframes tabFlash {
  0%   { background: rgba(211,84,0,0); }
  25%  { background: rgba(211,84,0,0.18); }
  100% { background: rgba(211,84,0,0); }
}

.nav-tab:active { animation: tabFlash 0.28s ease forwards; }

/* ══════════════════════════════════════════════════════════════
   12. DARK TOGGLE — Spin con spring
══════════════════════════════════════════════════════════════ */

@keyframes toggleSpin {
  0%   { transform: rotate(0deg) scale(1); }
  35%  { transform: rotate(190deg) scale(1.3); }
  65%  { transform: rotate(330deg) scale(0.88); }
  82%  { transform: rotate(355deg) scale(1.05); }
  100% { transform: rotate(360deg) scale(1); }
}

.dark-toggle.spinning {
  animation: toggleSpin 0.45s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* ══════════════════════════════════════════════════════════════
   13. SUNDAY BADGE — Shimmer de fuego
══════════════════════════════════════════════════════════════ */

@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position:  200% center; }
}

.sunday-badge {
  background: linear-gradient(
    90deg,
    var(--rojo) 0%, #C0392B 30%, #FF6242 50%, #C0392B 70%, var(--rojo) 100%
  );
  background-size: 200% auto;
  animation: shimmer 2.8s linear infinite;
}

/* ══════════════════════════════════════════════════════════════
   14. FEATURED CARD — Barra superior shimmer dorado
══════════════════════════════════════════════════════════════ */

.card-featured::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 4px;
  width: 100%;
  background: linear-gradient(
    90deg,
    var(--rojo), var(--naranja), var(--dorado), var(--naranja), var(--rojo)
  );
  background-size: 200% auto;
  animation: shimmer 3.2s linear infinite;
  pointer-events: none;
  z-index: 3;
}

/* ══════════════════════════════════════════════════════════════
   15. FOOTER — Reveal dramático
══════════════════════════════════════════════════════════════ */

#footer.reveal {
  transform: translateY(55px);
  transition: opacity 0.85s ease, transform 0.85s cubic-bezier(0.22, 1, 0.36, 1);
}

#footer.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ══════════════════════════════════════════════════════════════
   16. HERO DIVIDER — Ondula como cuerda
══════════════════════════════════════════════════════════════ */

@keyframes ropeWave {
  0%, 100% { letter-spacing: -0.12em; opacity: 0.55; }
  50%       { letter-spacing: -0.06em; opacity: 0.38; }
}

.hero-divider .rope-line {
  display: inline-block;
  animation: ropeWave 4.5s ease-in-out infinite;
}

/* ══════════════════════════════════════════════════════════════
   17. SECTION TRANSITIONS
══════════════════════════════════════════════════════════════ */

.menu-section { transition: background-color 0.5s ease; }

/* ══════════════════════════════════════════════════════════════
   18. ACCESIBILIDAD — prefers-reduced-motion
══════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  .reveal, .card.reveal, .section-label.reveal, #footer.reveal {
    transform: none !important;
    transition: opacity 0.3s ease !important;
  }
  .logo-wrap, .hero-title, .hero-sub, .hero-divider {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
  .ember { animation: none !important; opacity: 0 !important; }
  .card { transition: none !important; }
  .card:active { transform: none !important; }
  .price.price-visible { animation: none !important; opacity: 1 !important; }
  .price-wrap-anim.price-visible::before { animation: none !important; }
  .fab-whatsapp { animation: none !important; opacity: 1; }
  .sunday-badge { animation: shimmer 5s linear infinite; }
}